.container
  .content
    - flash.each do |key, value|
      .alert-message.fade.in{:"data-alert"=>"alert", :class=> key}
        %a.close{:href=>"#"} ×                                
        %p
          = value   
      - flash.delete(key)

    - unless signed_in?
      .hero-unit
        %h2 Welcome to the Open Palette Beta
        %p Vestibulum id ligula porta felis euismod semper. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.
        %p
          = link_to "Sign up »", signup_path, :class=>"btn primary large"
                                                    
    .row 
      .span12
        - unless @feed_items.empty?
          %ul.media-grid
            - @item_count = 0
            - for feed_item in @feed_items
              - @item_count = @item_count + 1
              = render :partial => "shared/feed_item", :locals => { :feed_item => feed_item,:item_count => @item_count }
          = paginate @feed_items
      .span4
        .sidebar
          %h5 Popular Tags
          .row
            %ol.tags
              - for tag in @tags
                %li.tag
                  = link_to tag.name, { :action => :tag, :id => tag.name, :controller => :posts }
          %h5 Top Users
          %ul.media-grid
            - User.popular.each do |u|
              %li 
                = link_to gravatar_for(u, :size => 48, :class => "thumbnail", :alt => u.name), user_path(u)
              
    = render 'layouts/footer'